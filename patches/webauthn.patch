--- src/Metadata/MetadataResolverInterface.orig.php	2022-09-22 09:55:34.152470592 +0300
+++ src/Metadata/MetadataResolverInterface.php	2022-09-22 09:55:48.708300739 +0300
@@ -5,7 +5,7 @@
 use MadWizard\WebAuthn\Attestation\TrustAnchor\MetadataInterface;
 use MadWizard\WebAuthn\Server\Registration\RegistrationResultInterface;
 
-interface MetadataResolverInterface // TODO move namespace
+interface MetadataResolverInterface
 {
     public function getMetadata(RegistrationResultInterface $registrationResult): ?MetadataInterface;
 }
--- src/Server/WebAuthnServer.php
+++ src/Server/WebAuthnServer.php
@@ -322,6 +322,10 @@ final class WebAuthnServer implements ServerInterface, LoggerAwareInterface
             foreach ($credentialIds as $credentialId) {
                 $descriptor = new PublicKeyCredentialDescriptor($credentialId->toBuffer());
                 $requestOptions->addAllowedCredential($descriptor);
+                $credential = $this->credentialStore->findCredential($credentialId);
+                foreach($credential->getTransports() as $transport){
+                    $descriptor->addTransport($transport);
+                }
             }
         }
 
--- src/Credential/UserCredentialInterface.php
+++ src/Credential/UserCredentialInterface.php
@@ -11,4 +11,6 @@ interface UserCredentialInterface
     public function getPublicKey(): CoseKeyInterface;
 
     public function getUserHandle(): UserHandle;
+
+    public function getTransports(): array;
 }
